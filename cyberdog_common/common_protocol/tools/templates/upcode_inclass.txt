#include <memory>
#include <functional>

#include "common_protocol/common_protocol.hpp"

class OUT_CLASS
{
private:
  class {$NAME}
  {
public:
{$VARS}
  };

  std::shared_ptr<cyberdog::common::Protocol<{$NAME}>> ptc;

  void {$NAME}_callback(std::shared_ptr<{$NAME}> data)
  {
    
  }

  void {$NAME}_init(
    const std::string & protocol_toml_path,
    bool for_send = false,
    int canid_offset = 0)
  {
    ptc = std::make_shared<cyberdog::common::Protocol<{$NAME}>>(protocol_toml_path, for_send, canid_offset);
{$LINK_VARS}
    ptc->SetDataCallback(std::bind(&OUT_CLASS::{$NAME}_callback, this, std::placeholders::_1));
  }
};
